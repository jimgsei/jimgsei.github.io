<!DOCTYPE html>

<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="OP.ico" type="image/x-icon" media="(prefers-color-scheme: light)">
    <link rel="icon" href="OIP.ico" type="image/x-icon" media="(prefers-color-scheme: dark)">
    <link rel="shortcut icon" href="OP.ico" type="image/x-icon" media="(prefers-color-scheme: light)">
    <link rel="shortcut icon" href="OIP.ico" type="image/x-icon" media="(prefers-color-scheme: dark)">
  <title>F1 | Jimgsey</title>
<style>
    body {
        background-color: black;
        color: white;
    }

    .container2 {
        text-align: center;
        width: 80%;
        margin: 0 auto;
        margin-top: 100px;
    }

    h1 {
        text-align: center;
    }

    table {
        border-collapse: separate;
        width: 100%;
        margin: 0 auto;
        border-radius: 10px;
        overflow: hidden;
    }

    th, td {
        border: none;
        padding: 6px;
        text-align: left;
    }

    th {
        font-weight: bold;
        background-color: #006F62;
        color: white;
        text-align: center;
        border-radius: 10px 10px 0 0;
    }

    .separator {
        margin-top: 20px;
    }

    #race-name {
        margin: 20px 0;
        font-size: 24px;
        color: white;
        text-align: center;
    }

    .tables-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin-top: 20px;
    }

    .table-container {
        width: 30%;
        margin-bottom: 20px;
    }

    .table-container table {
        width: 100%;
        border-collapse: separate;
        margin-bottom: 20px;
    }

    .table-container th,
    .table-container td {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    .table-container th {
        background-color: #006F62;
        color: white;
    }

    .highlight {
        font-weight: bold;
    }

    @media (max-width: 768px) {
        .table-container {
            width: 100%;
        }
    }

    @media (max-width: 1200px) {
        .table-container {
            width: 60%;
        }
    }

    @media (max-width: 992px) {
        .table-container {
            width: 100%;
        }
    }

    .circuit-info {
        border: 1px solid #006F62;
        border-radius: 5px;
        padding: 10px;
        margin: 10px auto;
        max-width: 300px;
    }

    .circuit-info img {
        max-width: 100%;
        display: block;
        margin: 0 auto;
    }

    h2 {
        text-align: center;
    }

    .race-container {
        max-width: 100%;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        grid-gap: 20px;
        padding: 20px;
    }

    .race-card {
        border: 1px solid #006F62;
        padding: 20px;
        border-radius: 5px;
        background-color: #f9f9f9;
        color: black;
    }

    .race-name {
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 10px;
    }

    .race-info {
        font-style: italic;
        margin-bottom: 5px;
    }

    .content {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-top: 20px;
        gap: 10px;
    }

    #movistarContainer {
        margin: 20px auto;
        max-width: 600px;
        border: 1px solid #ccc;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    #movistarContainer iframe {
        width: 100%;
        height: 400px;
        border: none;
    }

    .iframe-container {
        width: 49%;
        height: 400px;
        margin-top: 10px;
    }

    .iframe-container iframe {
        width: 100%;
        height: 100%;
    }

    .iframe-title {
        text-align: center;
        margin-bottom: 1px;
        font-size: 18px;
        color: white;
    }

    .dashboard-container {
        width: 100%;
        height: 600px;
        margin-top: 7px;
    }

    .spacer {
        margin-top: 40px;
    }

    .dashboard-container iframe {
        width: 100%;
        height: 100%;
        border: none;
        margin-top: 4px;
    }

    @media (max-width: 768px) {
        .container {
            width: 90%;
			margin-bottom: -200px;
			margin-top: 0px;
        }

        .table-container {
            width: 95%;
            margin-left: auto;
            margin-right: auto;
        }

        .race-container {
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .circuit-info {
            max-width: 250px;
        }

        .table-wrapper {
            margin-bottom: 10px;
        }
    }

    .containert {
        background-color: #1a1a1a;
        padding: 10px;
        border-radius: 8px;
        border: 3px solid #006F62;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        max-width: 550px;
        width: 100%;
        margin: 0 auto;
        background-color: transparent;
		margin-bottom: 10px;
    }

    h1 {
        text-align: center;
        color: #ffffff;
        font-weight: bold;
    }

    .horizontal-container {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: flex-start;
        flex-wrap: wrap;
		margin-bottom: 10px;
    }

    .current-circuit {
        flex: 3;
        width: 280px;
        margin-right: 10px;
        padding: 10px;
        border: 0px solid #444444;
        border-radius: 8px;
        text-align: center;
        font-size: 14px;
        background-color: transparent;
		margin-bottom: 20px;
    }

    .current-circuit p {
        margin: 5px 0;
        font-weight: bold;
        color: #ffffff;
    }

    .data-cell {
        background-color: transparent;
        border: 1px solid #444444;
        padding: 10px;
        border-radius: 8px;
        margin: 5px 0;
    }

    .race-name {
        font-size: 1.5em;
        margin: 10px 0;
    }

    a {
        color: #ffffff;
        text-decoration: underline;
    }

    .data-boxt {
        flex: 2;
        height: 200px;
        padding: 5px;
        position: relative;
        top: 70px;
        background-color: transparent;
        border: 0px solid #8B0000;
        margin: 0 auto;
    }

    .details {
        display: block;
    }

    .show-details .details {
        display: block;
    }

    .show-details .race-name::after {
        content: " ";
    }

    .race-name::after {
        content: " ";
    }

    .show-more {
        display: none;
        cursor: pointer;
        color: #ffffff;
        background-color: rgba(139, 0, 0, 0.1);
        border: 1px solid #006F62;
        border-radius: 8px;
        padding: 5px;
        margin-top: 10px;
    }

    @media (max-width: 768px) {
        .containert {
            max-width: 300px;
            padding: 10px;
            border-width: 2px;
        }

        .horizontal-container {
            flex-direction: column;
        }

        .current-circuit {
            margin-right: 0;
            margin-bottom: 2px;
        }

        .data-boxt {
            width: 95%;
            height: auto;
            top: 0;
            margin-top: 0px;
            background-color: transparent;
        }

        .details {
            display: none;
        }

        .show-more {
            display: block;
        }

        .current-circuit .data-cell:first-child {
            display: block;
        }
    }

    .data-boxt {
        margin-top: -20px;
        padding: 10px;
        background-color: #2a2a2a;
        flex: 2;
        background-color: transparent;
    }

    .data-boxt p {
        margin: 5px 0;
        font-weight: bold;
    }

    a {
        color: #ffffff;
        text-decoration: underline;
    }

    .data-boxt .info-line {
        display: flex;
        justify-content: space-between;
        margin: 5px 0;
        padding: 5px;
        border: 1px solid #444444;
        border-radius: 4px;
        background-color: rgba(0, 0, 0, 0.5);
    }

    .data-boxt .info-line span {
        flex: 1;
        text-align: left;
        font-weight: bold;
        font-size: 13px;
    }

    .data-boxt .info-line span.value {
        text-align: right;
        font-weight: normal;
        font-size: 13px;
    }

    .show-weather-btn {
        display: none;
        background-color: transparent;
        color: #ffffff;
        border: 1px solid #006F62;
        border-radius: 8px;
        padding: 10px;
        text-align: center;
        cursor: pointer;
        margin: 0 auto;
        padding: 5px;
        width: 93%;
    }

    @media (max-width: 768px) {
        .data-boxt {
            display: none;
        }

        .show-weather-btn {
            display: block;
        }
    }

    .creditos {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        text-align: center;
    }

    .containerN {
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .logo-small {
        width: 100px;
        height: auto;
    }

    .containerl {
        max-width: 450px;
        margin: 0px auto;
        background-color: #fff;
        padding: 0px;
        border-radius: 8px;
        box-shadow: 0 0 0px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    iframe {
        width: 100%;
        height: 400px;
        border: none;
        border-radius: 8px;
    }

    .circuit-card {
        background-color: #666;
        color: #fff;
        margin: 10px;
        padding: 10px;
        border-radius: 5px;
        border: 2px solid #006F62;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        display: inline-block;
        width: calc(15% - 20px);
        vertical-align: top;
        text-align: center;
        background-color: transparent;
    }

    .circuit-name {
        font-size: 1rem;
        margin-bottom: 10px;
    }

    .circuit-info {
        font-size: 0.8rem;
        text-align: center;
    }

    @media (max-width: 1200px) {
        .circuit-card {
            width: calc(20% - 20px);
        }
    }

    @media (max-width: 992px) {
        .circuit-card {
            width: calc(26% - 20px);
        }
    }

    @media (max-width: 768px) {
        .circuit-card {
            width: calc(40% - 20px);
        }
    }

    @media (max-width: 576px) {
        .circuit-card {
            width: calc(90% - 20px);
        }
    }

    .boton {
        background-color: #006F62;
        color: white;
        padding: 10px 20px;
        margin: 5px;
        border: 2px solid white;
        border-radius: 10px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s;
    }

    .boton:hover {
        background-color: #006F62;
        transform: scale(1.05);
    }

    .botones-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .seccion {
        margin-top: 50px;
    }

    @media (max-width: 600px) {
        .botones-container {
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
        }

        .boton {
            width: 45%;
            margin: 5px;
        }
    }

    .boton-flotante {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #006F62;
        color: white;
        border: 2px solid white;
        padding: 10px;
        width: 45px;
        height: 45px;
        cursor: pointer;
        font-size: 16px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
    }

    .boton-flotante:hover {
        background-color: #006b3c;
    }

    .flecha {
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 15px solid white;
    }

    #particles-js {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: -1;
    }

    .content {
        height: 200vh;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: Arial, sans-serif;
    }

    .main-button {
        padding: 10px 20px;
        cursor: pointer;
        background-color: #006F62;
        color: white;
        border: 2px solid white;
        border-radius: 5px;
        display: block;
        margin: 20px auto;
        text-align: center;
        transition: background-color 0.3s, transform 0.3s;
        position: relative;
    }

    .main-button:hover {
        background-color: #006F62;
    }

    .dropdown-container {
        display: none;
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        width: auto;
        min-width: 200px;
        background-color: rgba(0, 0, 0, 0.9);
        border: 1px solid #006F62;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        flex-direction: column;
        align-items: center;
        padding: 10px;
        margin-top: 5px;
    }

    .dropdown-button {
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        cursor: pointer;
        background-color: #006F62;
        color: white;
        border: 2px solid white;
        border-radius: 5px;
        text-align: center;
        transition: background-color 0.3s, transform 0.3s;
    }

    .dropdown-button:hover {
        background-color: #005f52;
    }

    @media (max-width: 600px) {
        .dropdown-container {
            width: 90%;
            min-width: unset;
        }
    }

    .upcoming-circuits-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        padding: 20px;
    }

    .upcoming-circuit-box {
        border: 2px solid #006F62;
        background-color: transparent;
        margin: 10px;
        padding: 10px;
        width: calc(20% - 40px);
        box-sizing: border-box;
        text-align: center;
        color: white;
        border-radius: 10px;
    }

    .upcoming-data-cell {
        margin: 5px 0;
        border: 1px solid white;
        border-radius: 5px;
        padding: 5px;
    }

    .upcoming-race-name {
        font-weight: bold;
    }

    @media (max-width: 1200px) {
        .upcoming-circuit-box {
            width: calc(25% - 40px);
        }
    }

    @media (max-width: 992px) {
        .upcoming-circuit-box {
            width: calc(33.33% - 40px);
        }
    }

    @media (max-width: 768px) {
        .upcoming-circuit-box {
            width: calc(50% - 40px);
        }
    }

    @media (max-width: 576px) {
        .upcoming-circuit-box {
            width: calc(100% - 40px);
        }
    }

    .statusContainer {
        width: 300px;
        margin: auto;
        padding-bottom: 20px;
    }

    .customTable {
        background-color: transparent;
        border-collapse: separate;
        border-spacing: 0;
        text-align: left;
        border-radius: 10px;
        overflow: hidden;
        width: auto;
    }

    th, td {
        padding: 5px;
        text-align: center;
        white-space: nowrap;
        width: 100px;
        border: 1px solid white;
        border-radius: 10px;
    }

    th {
        background-color: #006F62;
        color: white;
    }

    .status {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .tick {
        color: green;
        margin-left: 10px;
    }

    .cross {
        color: red;
        margin-left: 10px;
    }

    a {
        text-decoration: none;
        color: inherit;
    }

    .containerGame {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: transparent;
        color: #fff;
        font-family: Arial, sans-serif;
        margin: 0;
    }

    .title {
        font-size: 1.5em;
        margin-bottom: 10px;
    }

    .description {
        margin-bottom: 15px;
        text-align: center;
    }

    .game-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 2px solid #fff;
        border-radius: 20px;
        padding: 15px;
        margin-bottom: 15px;
        width: 90%;
        max-width: 400px;
        margin: 0 auto;
    }

    .lights {
        display: flex;
        justify-content: center;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }

    .column {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 5px;
        border: 2px solid #fff;
        border-radius: 10px;
        padding: 5px;
        background-color: #333;
    }

    .light {
        width: 30px;
        height: 30px;
        margin: 5px;
        border-radius: 50%;
        background-color: black;
        opacity: 0.3;
        border: 2px solid #fff;
    }

    .light.on {
        background-color: red;
        opacity: 1;
    }

    .message {
        margin-top: 15px;
        text-align: center;
    }

    .best-time {
        background-color: #000;
        border: 2px solid #fff;
        padding: 10px;
        border-radius: 10px;
        width: 250px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 15px auto 0;
    }

    @media (max-width: 600px) {
        .containerGame {
            justify-content: center;
            align-items: center;
        }

        .light {
            width: 20px;
            height: 20px;
        }
    }

    .custom-container {
        justify-content: flex-start;
        align-items: flex-start;
        text-align: center;
        flex-wrap: wrap;
    }

    .custom-pilot-container {
        background-color: transparent;
        padding: 1px;
        border-radius: 1px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        width: auto;
        max-width: 100%;
        margin-top: 0;
        margin-bottom: 20px;
    }

    .custom-driver-cell {
        margin: 0;
        display: inline-block;
        justify-content: center;
        align-items: flex-start;
        text-align: center;
        background-color: transparent;
        border: 2px solid white;
        border-radius: 10px;
        position: relative;
        transform: scale(0.75);
        transform-origin: top center;
        font-size: 1.2em;
        min-height: 200px;
        transition: down 0.3s;
    }

    .custom-driver-cell img {
        display: table-cell;
        vertical-align: middle;
        margin: 0 auto;
        width: 150px;
        height: auto;
    }

    .custom-select, .custom-button {
        margin: 5px;
        padding: 10px;
        border: none;
        border-radius: 5px;
        font-size: 0.9em;
    }

    .custom-select {
        background-color: #006F62;
        color: white;
    }

    .custom-button {
        background-color: #006F62;
        color: white;
        cursor: pointer;
    }

    .custom-add-driver-button {
        background-color: #006F62;
        width: 40px;
        height: 40px;
        display: inline-block;
        text-align: center;
        line-height: 40px;
        font-size: 26px;
        border-radius: 5px;
        cursor: pointer;
    }

    .custom-delete-button {
        position: absolute;
        top: 5px;
        right: 5px;
        background-color: #006F62;
        width: 20px;
        height: 20px;
        text-align: center;
        line-height: 20px;
        font-size: 14px;
        border-radius: 50%;
        cursor: pointer;
    }

    .custom-info {
        margin-top: 10px;
    }

    .custom-info.custom-date {
        margin-bottom: 10px;
    }

    .custom-driver-selectors {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
    }

    .custom-show-more-button {
        background-color: #006F62;
        color: white;
        border: 1px solid white;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
    }

    .custom-hidden-info {
        display: none;
    }

    .header-content {
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    .header-image {
        width: 22%;
        height: auto;
        margin-right: 20px;
    }

    .header-image.enlarged {
        transform: scale(2);
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(2);
        z-index: 1000;
        border: 1px solid #006F62;
        border-radius: 8px;
    }

    .overlay.active {
        display: block;
    }

    .caption {
        display: none;
        position: fixed;
        top: calc(50% + 150px);
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 24px;
        z-index: 1001;
        background-color: rgba(0, 0, 0, 0.5);
        padding: 5px 10px;
        border-radius: 10px;
        border: 2px solid white;
    }

    .caption.active {
        display: block;
    }

    @media (max-width: 600px) {
        .header-image.enlarged {
            transform: translate(-50%, -50%) scale(5.5);
        }
    }

    .radiocon-container {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        max-width: 1200px;
        margin: 0 auto 80px auto;
        gap: 20px;
    }

    .radiocon {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 10px;
        border-radius: 8px;
        margin-bottom: 20px;
        flex: 1;
        max-height: 370px;
        overflow: hidden;
    }

    #race-control, #team-radio {
        max-height: 350px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding-bottom: 15px;
    }

    #race-control .race-message:last-child, #team-radio .radio-message:last-child {
        margin-bottom: 30px;
    }

    #race-control::-webkit-scrollbar,
    #team-radio::-webkit-scrollbar {
        width: 10px;
    }

    #race-control::-webkit-scrollbar-track,
    #team-radio::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 10px;
    }

    #race-control::-webkit-scrollbar-thumb,
    #team-radio::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.6);
        border-radius: 10px;
    }

    #race-control::-webkit-scrollbar-thumb:hover,
    #team-radio::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.8);
    }

    .race-message, .radio-message {
        margin-bottom: 15px;
    }

    .race-message time, .radio-message time {
        display: block;
        font-size: 12px;
        color: #fff;
    }

    .race-message p, .radio-message p {
        font-weight: bold;
        margin: 0;
        color: #fff;
    }

    audio {
        width: 100%;
    }

    .radio-message {
        background-color: rgba(255, 255, 255, 0.2);
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
        display: flex;
    }

    .radio-message table {
        width: 100%;
        border-collapse: collapse;
    }

    .radio-message td {
        border: 1px solid transparent;
        vertical-align: center;
        padding: 3px;
    }

    .radio-message td:first-child {
        width: 5%;
    }

    .radio-message td:last-child {
        width: 30%;
    }

    .radio-message audio {
        height: 30px;
        width: 100%;
    }

    .radio-message time {
        font-size: 14px;
        margin-bottom: 8px;
    }

    .radio-message .acronym-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin: 10px 0;
    }

    .radio-message .acronym-container p {
        font-size: 18px;
        margin: 2;
        color: #fff;
    }

    audio {
        margin: 2px 0;
    }

    .race-message {
        background-color: rgba(255, 255, 255, 0.2);
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.1);
    }

    h1 {
        text-align: center;
        font-size: 18px;
        color: #fff;
    }

    @media (min-width: 768px) {
        .radiocon {
            width: 100%;
        }
    }

    @media (max-width: 767px) {
        .radiocon-container {
            margin: 5px auto;
            flex-direction: column;
            max-width: 90%;
        }
    }

	#bestTimeContainer {
		display: flex;
		align-items: center;
		gap: 10px;
	}

	#clearCacheButton {
		background: none;
		border: none;
		cursor: pointer;
		font-size: 1.2em;
		color: #ff4444;
	}

	#clearCacheButton:hover {
		color: #cc0000;
	}
	.disclaimer-card {
		background-color: rgba(255, 255, 255, 0.1);
		border: 1px solid #006F62;
		border-radius: 10px;
		padding: 20px;
		text-align: center;
		max-width: 600px;
		margin: 20px auto;
		color: white;
	}

	.disclaimer-card p {
		margin-bottom: 20px;
		font-size: 12px; 
		line-height: 1.4; 
	}

	.disclaimer-card button {
		background-color: #006F62;
		color: white;
		border: none;
		padding: 10px 20px;
		border-radius: 5px;
		cursor: pointer;
		font-size: 16px;
		transition: background-color 0.3s;
	}

	.disclaimer-card button:hover {
		background-color: #005f52;
	}

</style>


<script src="https://cdn.jsdelivr.net/npm/luxon@2.3.0/build/global/luxon.min.js"></script>
</head>
<body>
<div id="particles-js"></div>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

 <div class="botones-container">
    <button class="boton" onclick="location.href='https://jimgsei.github.io/'">P√°ginas</button>
    <button class="boton" onclick="document.getElementById('clasificacion').scrollIntoView();">Clasificaci√≥n</button>
    <button class="boton" onclick="document.getElementById('calendario').scrollIntoView();">Calendario</button>
    <button class="boton" onclick="document.getElementById('programacion').scrollIntoView();">Programaci√≥n Dazn F1</button>
    <button class="boton" onclick="document.getElementById('juego').scrollIntoView();">Juego</button>
</div> 

<!-- Bot√≥n flotante -->
    <button class="boton-flotante" onclick="irArriba()">
        <div class="flecha"></div>
    </button>
  <main>
    <div class="header-content">
        <div class="overlay" id="overlay"></div>
        <img src="img/F1.jpg" alt="Descripci√≥n de la imagen" class="header-image" id="headerImage">
        <h1 class="header-title">F√≥rmula 1</h1>
		<div class="caption" id="caption">Fernando Alonso</div>
    </div>
    <div class="containert">
        <div class="horizontal-container">
            <div id="dataContainer">
                <!-- Data will be inserted here -->
            </div>
            <div class="data-boxt" id="weatherData">
                <div class="info-line"><span>Cargando...</span></div>
            </div>
            <button class="show-weather-btn" onclick="toggleWeatherData()">Mostrar Meteorolog√≠a <strong>&#9660;</strong></button>
        </div>
    </div>
	  
    <!-- Seleccionador pilotos -->
    <div class="custom-container">
        <div class="custom-pilot-container">
            <h1>Posici√≥n Pilotos</h1>
            <div id="custom-driver-selectors">
                <!-- Las celdas de los pilotos se generar√°n din√°micamente -->
            </div>
            <div id="custom-add-driver-button" class="custom-add-driver-button" onclick="customAddDriver()">+</div>
        </div>
    </div>
	
<div class="disclaimer-card">
    <p>
        Esta p√°gina no aloja ni reproduce contenido audiovisual propio. Los enlaces proporcionados redirigen a plataformas externas ajenas a este sitio. No nos responsabilizamos del contenido, disponibilidad o legalidad de dichas plataformas. Si decides acceder, lo haces bajo tu propia responsabilidad. Art√≠culo 17 de la Ley 34/2002, de Servicios de la Sociedad de la Informaci√≥n y del Comercio Electr√≥nico (LSSI).
    </p>
    <button onclick="window.open('https://vk.com/f1paratodos', '_blank')">Diferido</button>
    <button onclick="window.open('https://tflix.net/live/formula-1/', '_blank')">IOS</button>
</div>

<div class="spacer"></div>

    <div class="radiocon-container">
        <div class="radiocon">
            <h1>Radios de Equipo F1</h1>
            <div id="team-radio">
                <!-- Radios se cargar√°n din√°micamente -->
            </div>
        </div>

        <div class="radiocon">
            <h1>Control de Carrera F1</h1>
            <div id="race-control">
                <!-- Mensajes de control de carrera se cargar√°n din√°micamente -->
            </div>
        </div>
    </div>


      <!-- Dashboard -->
   <div class="dashboard-container">
      <h2>Dashboard personalizable</h2>
      <iframe src="https://f1-dash.com/dashboard" frameborder="0" allowfullscreen></iframe>
    </div>


<!-- Clasificaci√≥n -->
  <div id="clasificacion" class="seccion">
    <div class="container2">
      <div class="spacer"></div>
      <h2>Clasificaci√≥n</h2>
      <div class="tables-container" id="tables-container">
        <!-- Las tablas se generar√°n aqu√≠ -->
      </div>
    </div>
  </div>
  

 <!-- Programaci√≥n -->
<div id="programacion" class="seccion">
<div class="containerN">
        <h2>Horario Dazn F1</h2>
        <img src="https://www.adslzone.net/app/uploads-adslzone.net/2021/03/dazn-f1.jpg" alt="Logo DAZN F1" class="logo-small">
    </div>

   <div class="containerl">

        <iframe src="https://programaciontv.org/tv-hoy/programacion-dazn-f1/"></iframe>
    </div>
</div>

<div id="calendario" class="seccion">
      <h2>Pr√≥ximos circuitos</h2>
      <div class="upcoming-circuits-container" id="upcomingDataContainer"></div>
</div>



 <!-- Juego -->
 <div id="juego" class="seccion">
     <div class="containerGame">
        <h1>Juego F1</h1>
        <div class="description">Pulsar dentro del √°rea</div>
        <div class="game-area" id="gameArea">
            <div class="lights">
                <div class="column">
                    <div class="light" id="light1-1"></div>
                    <div class="light" id="light1-2"></div>
                    <div class="light" id="light1-3"></div>
                    <div class="light" id="light1-4"></div>
                </div>
                <div class="column">
                    <div class="light" id="light2-1"></div>
                    <div class="light" id="light2-2"></div>
                    <div class="light" id="light2-3"></div>
                    <div class="light" id="light2-4"></div>
                </div>
                <div class="column">
                    <div class="light" id="light3-1"></div>
                    <div class="light" id="light3-2"></div>
                    <div class="light" id="light3-3"></div>
                    <div class="light" id="light3-4"></div>
                </div>
                <div class="column">
                    <div class="light" id="light4-1"></div>
                    <div class="light" id="light4-2"></div>
                    <div class="light" id="light4-3"></div>
                    <div class="light" id="light4-4"></div>
                </div>
                <div class="column">
                    <div class="light" id="light5-1"></div>
                    <div class="light" id="light5-2"></div>
                    <div class="light" id="light5-3"></div>
                    <div class="light" id="light5-4"></div>
                </div>
            </div>
            <div class="message" id="message">Pulsa en el √°rea de juego para iniciar o reiniciar</div>
        </div>
        <div class="message best-time" id="bestTime" style="display: none;">Mejor tiempo: -- segundos</div>
		<button id="clearCacheButton" title="Borrar mejor tiempo">
        üóëÔ∏è <!-- √çcono de basura -->
    </button>
    </div>
</div>
	
      <!-- Status -->
    <h2>API</h2>
	<div class="statusContainer" id="tableContainer"></div>

	
	<!-- Github -->
      <div class="creditos">
	     <h2></h2>
        <span>Creado por Jimgsey</span>
        <a href="https://github.com/jimgsey" target="_blank">
       <img src="https://img.icons8.com/ios/50/FFFFFF/github.png" alt="Github" style="width: 25px; height: auto;">
        </a>
      </div>
    </div>
  </main>
  
<!-- Pilotos -->
    <script>
        let customDriverCount = 0; 
        const customSelectedDrivers = new Set();
        const customIntervals = {};
        let customDriverData = JSON.parse(localStorage.getItem('customDriverData')) || {};

        async function customFetchDrivers() {
            const response = await fetch('https://api.openf1.org/v1/drivers?session_key=latest');
            const drivers = await response.json();
            for (let i = 1; i <= customDriverCount; i++) {
                const driverSelect = document.getElementById(`custom-driver-select-${i}`);
                if (driverSelect) {
                    const selectedValue = driverSelect.value;
                    driverSelect.innerHTML = '<option value="">Selecciona un piloto</option>'; // Reset options
                    drivers.forEach(driver => {
                        const option = document.createElement('option');
                        option.value = driver.driver_number;
                        option.textContent = driver.full_name;
                        option.dataset.headshotUrl = driver.headshot_url;
                        driverSelect.appendChild(option);
                    });
                    driverSelect.value = selectedValue; 
                }
            }
            
            Object.keys(customDriverData).forEach(key => {
                const driverNumber = customDriverData[key].driverNumber;
                const driverSelect = document.getElementById(`custom-driver-select-${key}`);
                if (driverSelect) {
                    driverSelect.value = driverNumber;
                    customSelectDriver(key);
                }
            });
        }

        async function customSelectDriver(selectNumber) {
            const driverSelect = document.getElementById(`custom-driver-select-${selectNumber}`);
            if (!driverSelect) return; 

            const selectedOption = driverSelect.options[driverSelect.selectedIndex];
            const driverImage = document.getElementById(`custom-driver-image-${selectNumber}`);
            const positionInfo = document.getElementById(`custom-position-info-${selectNumber}`);

            
            if (driverImage) driverImage.style.display = 'none';
            if (positionInfo) positionInfo.textContent = '';

            
            if (customIntervals[selectNumber]) {
                clearInterval(customIntervals[selectNumber]);
            }

            if (selectedOption && selectedOption.value) {
                if (driverImage) {
                    driverImage.src = selectedOption.dataset.headshotUrl;
                    driverImage.style.display = 'block';
                }
                customSelectedDrivers.add(selectedOption.value);
                customUpdateDriverPosition(selectNumber, selectedOption.value);
                customIntervals[selectNumber] = setInterval(() => customUpdateDriverPosition(selectNumber, selectedOption.value), 25000); 

               
                customDriverData[selectNumber] = {
                    id: `custom-driver-cell-${selectNumber}`,
                    driverNumber: selectedOption.value
                };
                localStorage.setItem('customDriverData', JSON.stringify(customDriverData));            
            } else {
                customSelectedDrivers.delete(selectedOption.value);
            }
        }

async function customUpdateDriverPosition(selectNumber, driverNumber) {
    const apiURL = `https://api.openf1.org/v1/position?meeting_key=latest&driver_number=${driverNumber}`;
    const positionInfo = document.getElementById(`custom-position-info-${selectNumber}`);

    try {
        const response = await fetch(apiURL);

        if (response.status === 429) {
            console.error('Too Many Requests - slowing down requests.');
            setTimeout(() => {
                customUpdateDriverPosition(selectNumber, driverNumber); 
            }, 10000); 
            return;
        }

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const dataArray = await response.json();

        if (!Array.isArray(dataArray) || dataArray.length === 0) {
            throw new Error('No contents found in response.');
        }

        const latestData = dataArray[dataArray.length - 1];

        if (!latestData.position || !latestData.date) {
            throw new Error('Position or date data not found in the latest record.');
        }

        const dateObj = new Date(latestData.date);
        const formattedDate = new Intl.DateTimeFormat('es-ES', {
            day: '2-digit',
            month: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hourCycle: 'h23',
            timeZone: 'Europe/Madrid'
        }).format(dateObj);

        positionInfo.innerHTML = `Posici√≥n: ${latestData.position}<br> ${formattedDate.replace(',', ' -')}`;
        
    } catch (error) {
        console.error('Error fetching driver position data:', error);
        positionInfo.innerHTML = `Error al obtener la posici√≥n: ${error.message}`;
    }
}


        function customAddDriver() {
            customDriverCount++;
            const driverSelectors = document.getElementById('custom-driver-selectors');
            const newCell = document.createElement('div');
            newCell.className = 'custom-driver-cell';
            newCell.id = `custom-driver-cell-${customDriverCount}`;
            newCell.innerHTML = `
                <img id="custom-driver-image-${customDriverCount}" src="" alt="Imagen del piloto" onerror="this.style.display='none'">
                <select id="custom-driver-select-${customDriverCount}" class="custom-select" onchange="customSelectDriver(${customDriverCount})">
                    <option value="">Selecciona un piloto</option>
                </select>
                <div id="custom-position-info-${customDriverCount}" class="custom-info"></div>
                <div class="custom-delete-button" onclick="customDeleteDriver(${customDriverCount})">√ó</div>
            `;
            driverSelectors.appendChild(newCell);
            customFetchDrivers();
        }

        function customDeleteDriver(selectNumber) {
            const driverCell = document.getElementById(`custom-driver-cell-${selectNumber}`);
            if (driverCell) {
                driverCell.remove(); 
                clearInterval(customIntervals[selectNumber]);
                delete customIntervals[selectNumber];
                delete customDriverData[selectNumber];

                const newCustomDriverData = {};
                let newCustomDriverCount = 0;
                document.querySelectorAll('.custom-driver-cell').forEach((cell, index) => {
                    newCustomDriverCount++;
                    cell.id = `custom-driver-cell-${newCustomDriverCount}`;
                    cell.querySelector('img').id = `custom-driver-image-${newCustomDriverCount}`;
                    const select = cell.querySelector('select');
                    select.id = `custom-driver-select-${newCustomDriverCount}`;
                    select.setAttribute('onchange', `customSelectDriver(${newCustomDriverCount})`);
                    newCustomDriverData[newCustomDriverCount] = {
                        id: `custom-driver-cell-${newCustomDriverCount}`,
                        driverNumber: select.value
                    };
                });
                customDriverData = newCustomDriverData;
                customDriverCount = newCustomDriverCount;
                localStorage.setItem('customDriverData', JSON.stringify(customDriverData));
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (Object.keys(customDriverData).length === 0) {
                customDriverData = {
                    1: { id: 'custom-driver-cell-1', driverNumber: '14' },
                    2: { id: 'custom-driver-cell-2', driverNumber: '55' }
                };
                localStorage.setItem('customDriverData', JSON.stringify(customDriverData));
            }
            Object.keys(customDriverData).forEach(key => {
                customDriverCount++;
                const driverSelectors = document.getElementById('custom-driver-selectors');
                const newCell = document.createElement('div');
                newCell.className = 'custom-driver-cell';
                newCell.id = `custom-driver-cell-${key}`;
                newCell.innerHTML = `
                    <img id="custom-driver-image-${key}" src="" alt="Imagen del piloto" onerror="this.style.display='none'">
                    <select id="custom-driver-select-${key}" class="custom-select" onchange="customSelectDriver(${key})">
                        <option value="">Selecciona un piloto</option>
                    </select>
                    <div id="custom-position-info-${key}" class="custom-info"></div>
                    <div class="custom-delete-button" onclick="customDeleteDriver(${key})">√ó</div>
                `;
                driverSelectors.appendChild(newCell);
            });
            customFetchDrivers();
        });
    </script>

<!-- Clasificaciones -->
<script>
    let qualifyingData = null;
    let championshipData = null;
    let constructorData = null;

    function createTable(id, header, columns) {
        const tableContainer = document.createElement('div');
        tableContainer.classList.add('table-container');
        const table = document.createElement('table');
        table.id = id;

        const thead = document.createElement('thead');
        const headerRow = document.createElement('tr');
        const headerCell = document.createElement('th');
        headerCell.colSpan = columns.length;
        headerCell.textContent = header;
        headerRow.appendChild(headerCell);
        thead.appendChild(headerRow);

        const columnRow = document.createElement('tr');
        columns.forEach(col => {
            const th = document.createElement('th');
            th.textContent = col;
            columnRow.appendChild(th);
        });
        thead.appendChild(columnRow);

        table.appendChild(thead);
        const tbody = document.createElement('tbody');
        table.appendChild(tbody);

        tableContainer.appendChild(table);
        return tableContainer;
    }

    const tablesContainer = document.getElementById('tables-container');
    tablesContainer.appendChild(createTable('qualifying-table', 'Clasificaci√≥n de la √öltima Carrera', ['Puesto', 'Piloto']));
    tablesContainer.appendChild(createTable('championship-table', 'Clasificaci√≥n del Campeonato', ['Puesto', 'Piloto', 'Puntos']));
    tablesContainer.appendChild(createTable('constructor-table', 'Clasificaci√≥n de Constructores', ['Puesto', 'Equipo', 'Puntos']));

    const retryDelay = 30000; 
    const fetchDelay = 5000; 

    async function fetchWithRetry(url, useProxy = true) {
        const proxyUrl = 'https://api.allorigins.win/get?url=';
        const fullUrl = useProxy ? proxyUrl + encodeURIComponent(url) : url;

        try {
            const response = await fetch(fullUrl);
            if (!response.ok) throw new Error('Network response was not ok');

            const data = await response.json();
            let jsonData;
            try {
                jsonData = useProxy ? JSON.parse(data.contents) : data;
            } catch (jsonError) {
                console.warn("Error al analizar JSON, intentando con proxy...");
                return useProxy ? fetchWithRetry(url, false) : null; 
            }

            return jsonData;
        } catch (error) {
            console.error('Error fetching data:', error);
            throw error; 
        }
    }

async function fetchLastF1Qualifying() {
    if (qualifyingData) {
        updateQualifyingTable(qualifyingData);
        return;
    }

    try {
        qualifyingData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/results.json', false);
        if (!qualifyingData) {
            qualifyingData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/results.json', true);
        }
        updateQualifyingTable(qualifyingData);
    } catch (error) {
        console.error('Error fetching last F1 race results:', error);
        document.getElementById('qualifying-table').querySelector('tbody').textContent = 'Hubo un error al obtener la informaci√≥n de la √∫ltima carrera de F1.';
    }
}

function updateQualifyingTable(data) {
    const raceName = data.MRData.RaceTable.Races[0].raceName;
    const raceRound = data.MRData.RaceTable.Races[0].round; 
    const raceResults = data.MRData.RaceTable.Races[0].Results;

    const headerCell = document.getElementById('qualifying-table').rows[0].cells[0];
    headerCell.textContent = `${raceName} - Carrera N¬∫ ${raceRound}`;

    const tableBody = document.getElementById('qualifying-table').querySelector('tbody');
    let html = '';
    raceResults.forEach(result => {
        const driverName = `${result.Driver.givenName} ${result.Driver.familyName}`;
        const position = result.position;
        const isFernandoOrCarlos = driverName.includes('Fernando Alonso') || driverName.includes('Carlos Sainz');
        html += `<tr${isFernandoOrCarlos ? ' class="highlight"' : ''}><td>${position}</td><td>${driverName}</td></tr>`;
    });
    tableBody.innerHTML = html;
}

    async function fetchChampionshipStandings() {
        if (championshipData) {
            updateChampionshipTable(championshipData);
            return;
        }

        try {
            championshipData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/driverstandings.json', false);
            if (!championshipData) {
                championshipData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/driverstandings.json', true);
            }
            updateChampionshipTable(championshipData);
        } catch (error) {
            console.error('Error fetching championship standings:', error);
            document.getElementById('championship-table').querySelector('tbody').textContent = 'Hubo un error al obtener la clasificaci√≥n del campeonato de F1.';
        }
    }

    function updateChampionshipTable(data) {
        const standings = data.MRData.StandingsTable.StandingsLists[0].DriverStandings;

        const tableBody = document.getElementById('championship-table').querySelector('tbody');
        let html = '';
        standings.forEach(standing => {
            const position = standing.position;
            const driverName = `${standing.Driver.givenName} ${standing.Driver.familyName}`;
            const points = standing.points;
            html += `<tr><td>${position}</td><td>${driverName}</td><td>${points}</td></tr>`;
        });
        tableBody.innerHTML = html;
    }

    async function fetchConstructorStandings() {
        if (constructorData) {
            updateConstructorTable(constructorData);
            return;
        }

        try {
            constructorData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/constructorstandings.json', false);
            if (!constructorData) {
                constructorData = await fetchWithRetry('https://api.jolpi.ca/ergast/f1/2025/constructorstandings.json', true);
            }
            updateConstructorTable(constructorData);
        } catch (error) {
            console.error('Error fetching constructor standings:', error);
            document.getElementById('constructor-table').querySelector('tbody').textContent = 'Hubo un error al obtener la clasificaci√≥n de constructores de F1.';
        }
    }

    function updateConstructorTable(data) {
        const standings = data.MRData.StandingsTable.StandingsLists[0].ConstructorStandings;

        const tableBody = document.getElementById('constructor-table').querySelector('tbody');
        let html = '';
        standings.forEach(standing => {
            const position = standing.position;
            const teamName = standing.Constructor.name;
            const points = standing.points;
            html += `<tr><td>${position}</td><td>${teamName}</td><td>${points}</td></tr>`;
        });
        tableBody.innerHTML = html;
    }

    async function loadF1Data() {
        while (true) {
            try {
                await fetchLastF1Qualifying();
                await fetchChampionshipStandings();
                await fetchConstructorStandings();
                break; 
            } catch (error) {
                console.error('Fallo en la obtenci√≥n de datos. Esperando 30 segundos para volver a intentar...', error);
                await new Promise(resolve => setTimeout(resolve, retryDelay)); 
            }
        }
    }

    loadF1Data(); 
</script>


 <!-- Horarios y datos carrera actual -->
<script>
    let lastRaceData = null;

    async function fetchF1Data() {
        const dataContainer = document.getElementById('dataContainer');
        const proxyUrl = 'https://api.allorigins.win/get?url=';
        const targetUrl = encodeURIComponent('https://api.jolpi.ca/ergast/f1/current.json');

        const fetchData = async (url) => {
            const response = await fetch(url);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            return JSON.parse(data.contents);
        };

        if (lastRaceData) {
            return; 
        }

        let storedData = null;

        try {
            const jsonData = await fetchData(proxyUrl + targetUrl);
            storedData = jsonData;
        } catch (error) {
            console.warn('Error al usar el proxy, intentando directamente:', error);
            try {
                const response = await fetch('https://api.jolpi.ca/ergast/f1/current.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const jsonData = await response.json();
                storedData = jsonData;
            } catch (error) {
                console.error('Error al obtener datos:', error);
                dataContainer.textContent = 'Error: ' + error.message;
                return; 
            }
        }

        dataContainer.textContent = '';

        const now = new Date().toLocaleString('en-US', { timeZone: 'Europe/Madrid' });
        const today = new Date(now).toISOString().split('T')[0];

        const races = storedData.MRData.RaceTable.Races;
        let nextRace = null;
        for (let race of races) {
            if (race.date === today) {
                nextRace = race;
                break;
            } else if (new Date(race.date) > new Date(today)) {
                nextRace = race;
                break;
            }
        }

        if (JSON.stringify(nextRace) !== JSON.stringify(lastRaceData)) {
            lastRaceData = nextRace; 

            dataContainer.innerHTML = '';

            if (nextRace) {
                const dataBox = document.createElement('div');
                dataBox.className = 'current-circuit';

                dataBox.innerHTML = `
                    <p class="race-name">${nextRace.raceName}</p>
                    <div class="data-cell"><strong>Carrera N¬∫ ${nextRace.round}</strong></div>
                    <div class="details">
                        <div class="data-cell">${nextRace.Circuit.circuitName}</div>
                        <div class="data-cell">Ubicaci√≥n: ${nextRace.Circuit.Location.locality}, ${nextRace.Circuit.Location.country}</div>
                        <div class="data-cell"><a href="${nextRace.url}" target="_blank">M√°s informaci√≥n en Wikipedia</a></div>
                    </div>
                    <div class="show-more">Mostrar Horarios <strong>&#9660;</strong></div>
                `;

                let carreraSessionsCell = `<div class="data-cell" style="border: 1px solid #006F62;"><strong>Carrera N¬∫ ${nextRace.round}</strong><br>`;
                let sprintSessionsCell = `<div class="data-cell" style="border: 1px solid lightblue;"><strong>Sprint</strong><br>`;

                const sessions = [
                    { name: 'Libres 1', date: nextRace.FirstPractice?.date, time: nextRace.FirstPractice?.time },
                    { name: 'Libres 2', date: nextRace.SecondPractice?.date, time: nextRace.SecondPractice?.time },
                    { name: 'Libres 3', date: nextRace.ThirdPractice?.date, time: nextRace.ThirdPractice?.time },
                    { name: 'Clasificaci√≥n', date: nextRace.Qualifying?.date, time: nextRace.Qualifying?.time },
                    { name: 'Sprint Clasificaci√≥n', date: nextRace.SprintQualifying?.date, time: nextRace.SprintQualifying?.time },
                    { name: 'Sprint', date: nextRace.Sprint?.date, time: nextRace.Sprint?.time },
                    { name: 'Carrera', date: nextRace.date, time: nextRace.time }
                ];

                sessions.sort((a, b) => new Date(`${a.date}T${a.time}`) - new Date(`${b.date}T${b.time}`));

                let upcomingSessions = false;
                let hasSprintSessions = false; // Variable para controlar si hay sesiones de Sprint

                for (let session of sessions) {
                    if (session.date && session.time) {
                        const sessionTime = new Date(`${session.date}T${session.time}`);
                        const madridSessionTime = sessionTime.toLocaleTimeString('es-ES', { timeZone: 'Europe/Madrid', hour: '2-digit', minute: '2-digit' });
                        const sessionDay = sessionTime.toLocaleDateString('es-ES', { weekday: 'long' });

                        if (sessionTime >= new Date(now)) {
                            upcomingSessions = true;

                            if (session.name === 'Sprint Clasificaci√≥n' || session.name === 'Sprint') {
                                sprintSessionsCell += `${session.name}: ${sessionDay.charAt(0).toUpperCase() + sessionDay.slice(1)}, ${sessionTime.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit' })} a las ${madridSessionTime}<br>`;
                                hasSprintSessions = true; // Se encuentra al menos una sesi√≥n de Sprint
                            } else {
                                carreraSessionsCell += `${session.name}: ${sessionDay.charAt(0).toUpperCase() + sessionDay.slice(1)}, ${sessionTime.toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit' })} a las ${madridSessionTime}<br>`;
                            }
                        }
                    }
                }

                carreraSessionsCell += `</div>`;
                sprintSessionsCell += `</div>`;

                if (upcomingSessions) {
                    dataBox.querySelector('.details').innerHTML += carreraSessionsCell;

                    // Solo a√±adir sprintSessionsCell si hay sesiones de Sprint
                    if (hasSprintSessions) {
                        dataBox.querySelector('.details').innerHTML += sprintSessionsCell;
                    }
                }

                dataContainer.appendChild(dataBox);

                // A√±adir evento de clic para desplegar/contraer detalles
                dataBox.querySelector('.show-more').addEventListener('click', function() {
                    dataBox.classList.toggle('show-details');
                    this.innerHTML = dataBox.classList.contains('show-details') ? 'Ocultar Horarios <strong>&#9650;</strong>' : 'Mostrar Horarios <strong>&#9660;</strong>';
                });
            } else {
                dataContainer.textContent = 'No hay carreras pr√≥ximas.';
            }
        }
    }

    fetchF1Data();
</script>


<!-- Pr√≥ximas carreras -->
<script>
    let cachedRaceData = null; 

    async function fetchUpcomingF1Data(delay = 120000) { 
        if (cachedRaceData) {
            displayRaces(cachedRaceData); 
            return;
        }

        try {
            const targetUrl = 'https://api.jolpi.ca/ergast/f1/current.json';
            const response = await fetch(targetUrl);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const jsonData = await response.json();
            cachedRaceData = jsonData; 

            displayRaces(jsonData);
        } catch (error) {
            console.error('Error al obtener los datos de F1:', error);
            document.getElementById('upcomingDataContainer').textContent = 'Error al obtener datos de la API: ' + error.message;

            setTimeout(() => fetchUpcomingF1Data(delay), delay);
        }
    }

    function displayRaces(jsonData) {
        const today = new Date().toISOString().split('T')[0];
        const races = jsonData.MRData.RaceTable.Races.filter(race => new Date(race.date) >= new Date(today));
        const dataContainer = document.getElementById('upcomingDataContainer');
        dataContainer.innerHTML = ''; 

        races.forEach(race => {
            const dataBox = document.createElement('div');
            dataBox.className = 'upcoming-circuit-box';

            const raceTime = new Date(`${race.date}T${race.time}`);
            const madridTime = raceTime.toLocaleTimeString('es-ES', { timeZone: 'Europe/Madrid', hour: '2-digit', minute: '2-digit' });
            const raceDate = new Date(race.date).toLocaleDateString('es-ES', { day: '2-digit', month: '2-digit', year: 'numeric' });

            dataBox.innerHTML = `
                <p class="upcoming-race-name">${race.raceName}</p>
                <div class="upcoming-data-cell">Fecha: ${raceDate}</div>
                <div class="upcoming-data-cell">Hora: ${madridTime}</div>
                <div class="upcoming-data-cell">Ubicaci√≥n: ${race.Circuit.Location.locality}, ${race.Circuit.Location.country}</div>
            `;

            dataContainer.appendChild(dataBox);
        });
    }

    fetchUpcomingF1Data(120000);
</script>




  <script>

        function irArriba() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
  </script>
  
    <!-- Meteorolog√≠a tiempo -->
<script>
    let weatherDataCache = null;

    async function fetchWeatherData() {
        const weatherDataDiv = document.getElementById('weatherData');
        const targetUrl = 'https://api.openf1.org/v1/weather?meeting_key=latest';

        try {
            const response = await fetch(targetUrl, { mode: 'cors' });
            if (!response.ok) {
                throw new Error('Error en la solicitud: ' + response.statusText);
            }
            const data = await response.json();
            const penultimoElemento = data[data.length - 1];

            if (JSON.stringify(data) !== JSON.stringify(weatherDataCache)) {
                weatherDataCache = data;
                updateWeatherData(weatherDataDiv, penultimoElemento);
            }
        } catch (error) {
            console.warn('Error al intentar obtener datos directamente, usando proxy...', error);
            const proxyUrl = 'https://api.allorigins.win/get?url=';

            try {
                const response = await fetch(proxyUrl + encodeURIComponent(targetUrl), { mode: 'cors' });
                if (!response.ok) {
                    throw new Error('Error en la solicitud: ' + response.statusText);
                }
                const data = await response.json();
                const jsonData = JSON.parse(data.contents);
                const penultimoElemento = jsonData[jsonData.length - 1];

                if (JSON.stringify(jsonData) !== JSON.stringify(weatherDataCache)) {
                    weatherDataCache = jsonData;
                    updateWeatherData(weatherDataDiv, penultimoElemento);
                }
            } catch (error) {
                if (!weatherDataDiv.hasChildNodes()) {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'info-line';
                    errorDiv.innerHTML = `<span>Error al obtener los datos: ${error.message}</span>`;
                    weatherDataDiv.appendChild(errorDiv);
                }
            }
        }
    }

    function updateWeatherData(weatherDataDiv, penultimoElemento) {
        const keysToShow = {
            "air_temperature": "Temp Aire",
            "track_temperature": "Temp Pista",
            "humidity": "Humedad",
            "pressure": "Presi√≥n Atm",
            "humidity_percentage": "Humedad",
            "rainfall": "Lluvia",
            "wind_speed": "Viento"
        };

        const tempDiv = document.createElement('div');

        for (const [key, label] of Object.entries(keysToShow)) {
            if (penultimoElemento[key] !== undefined) {
                const infoLine = document.createElement('div');
                infoLine.className = 'info-line';
                const labelSpan = document.createElement('span');
                const valueSpan = document.createElement('span');
                labelSpan.textContent = label;
                valueSpan.className = 'value';

                if (key === "track_temperature" || key === "air_temperature") {
                    valueSpan.textContent = `${penultimoElemento[key]} ¬∫C`;
                } else if (key === "rainfall") {
                    valueSpan.textContent = `${penultimoElemento[key]} L`;
                } else if (key === "wind_speed") {
                    valueSpan.textContent = `${penultimoElemento[key]} m/s`;
                } else if (key === "humidity" || key === "humidity_percentage") {
                    valueSpan.textContent = `${penultimoElemento[key]} %`;
                } else if (key === "pressure") {
                    valueSpan.textContent = `${penultimoElemento[key]} mbar`;
                } else {
                    valueSpan.textContent = penultimoElemento[key];
                }
                infoLine.appendChild(labelSpan);
                infoLine.appendChild(valueSpan);
                tempDiv.appendChild(infoLine);
            }
        }

        weatherDataDiv.innerHTML = tempDiv.innerHTML;
    }

    function toggleWeatherData() {
        const weatherDataDiv = document.getElementById('weatherData');
        const button = document.querySelector('.show-weather-btn');
        if (weatherDataDiv.style.display === 'none' || weatherDataDiv.style.display === '') {
            weatherDataDiv.style.display = 'block';
            button.textContent = 'Ocultar Meteorolog√≠a ‚ñ≤';
        } else {
            weatherDataDiv.style.display = 'none';
            button.textContent = 'Mostrar Meteorolog√≠a ‚ñº';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        fetchWeatherData(); 

        setInterval(fetchWeatherData, 120000);
    });
</script>


 <!-- Status API -->    
<script>
    async function checkApiStatus(apiUrl, expectedResponse) {
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
                throw new Error(`Network response was not ok: ${response.statusText}`);
            }
            const apiData = await response.text();

            if (apiUrl === 'https://api.jolpi.ca/ergast/') {
                return '‚úîÔ∏è'; 
            }
            try {
                const parsedData = JSON.parse(apiData);
                return parsedData.status === 'OK' ? '‚úîÔ∏è' : '‚ùå';
            } catch (e) {
                return apiData.includes(expectedResponse) ? '‚úîÔ∏è' : '‚ùå';
            }
        } catch (error) {
            console.error('Error al verificar el estado de la API:', error);
            return '‚ùå';
        }
    }

    function createTable() {
        const tableHTML = `
            <table>
                <thead>
                    <tr>
                        <th>API</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="https://api.jolpi.ca/ergast/" target="_blank">Ergast</a></td>
                        <td id="apiStatus1"></td>
                    </tr>
                    <tr>
                        <td><a href="https://openf1.org/" target="_blank">OpenF1</a></td>
                        <td id="apiStatus2"></td>
                    </tr>
                </tbody>
            </table>
        `;
        document.getElementById('tableContainer').innerHTML = tableHTML;
    }

    async function updateStatuses() {
        const ergastStatus = await checkApiStatus('https://api.jolpi.ca/ergast/', 'OK');
        document.getElementById('apiStatus1').innerHTML = ergastStatus;

        const openF1Status = await checkApiStatus('https://api.openf1.org/', 'Welcome to OpenF1!');
        document.getElementById('apiStatus2').innerHTML = openF1Status;
    }

    createTable();
    updateStatuses();
    setInterval(updateStatuses, 30000); 
</script>


	


  <!-- Control de carreras -->
    <script>
	
        const loadedRadioIds = new Set();
        const loadedRaceControlIds = new Set();

        async function fetchDriverAcronym(driverNumber) {
            try {
                const response = await fetch(`https://api.openf1.org/v1/drivers?session_key=latest&driver_number=${driverNumber}`);
                const driverData = await response.json();
                return driverData[0]?.name_acronym || driverNumber;
            } catch (error) {
                console.error(`Error al obtener el acr√≥nimo para el piloto ${driverNumber}:`, error);
                return driverNumber;
            }
        }

        async function fetchTeamRadios() {
            try {
                const response = await fetch('https://api.openf1.org/v1/team_radio?session_key=latest');
                const radios = await response.json();
                const teamRadioDiv = document.querySelector('#team-radio');
                radios.sort((a, b) => new Date(b.date) - new Date(a.date));
                for (const radio of radios) {
                    const radioId = `${radio.session_key}-${radio.driver_number}`;
                    if (loadedRadioIds.has(radioId)) continue;
                    const driverAcronym = await fetchDriverAcronym(radio.driver_number);
                    loadedRadioIds.add(radioId);
                    const radioMessageDiv = document.createElement('div');
                    radioMessageDiv.classList.add('radio-message');
                    const tableElement = document.createElement('table');
                    const rowElement = document.createElement('tr');
                    const timeAcronymCell = document.createElement('td');
                    const timeElement = document.createElement('time');
                    const radioDate = radio.date ? new Date(radio.date) : null;
                    if (radioDate) {
                        timeElement.textContent = radioDate.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                    }
                    const timeAcronymContainer = document.createElement('div');
                    timeAcronymContainer.appendChild(timeElement);
                    const acronymElement = document.createElement('p');
                    acronymElement.textContent = driverAcronym || 'Desconocido';
                    timeAcronymContainer.appendChild(acronymElement);
                    timeAcronymCell.appendChild(timeAcronymContainer);
                    rowElement.appendChild(timeAcronymCell);
                    const audioCell = document.createElement('td');
                    const audioElement = document.createElement('audio');
                    audioElement.controls = true;
                    audioElement.src = radio.recording_url || '';
                    audioCell.appendChild(audioElement);
                    rowElement.appendChild(audioCell);
                    tableElement.appendChild(rowElement);
                    radioMessageDiv.appendChild(tableElement);
                    teamRadioDiv.prepend(radioMessageDiv); 
                }
                const sortedRadios = Array.from(teamRadioDiv.children).sort((a, b) => {
                    const timeA = a.querySelector('time').textContent;
                    const timeB = b.querySelector('time').textContent;
                    return new Date(`1970-01-01T${timeB}Z`) - new Date(`1970-01-01T${timeA}Z`);
                });
                teamRadioDiv.innerHTML = '';
                sortedRadios.forEach(radio => teamRadioDiv.appendChild(radio));
                while (teamRadioDiv.children.length > 30) {
                    teamRadioDiv.removeChild(teamRadioDiv.lastChild);
                }
            } catch (error) {
                console.error('Error al cargar las radios del equipo:', error);
            }
        }

        async function fetchRaceControlMessages() {
            try {
                const response = await fetch('https://api.openf1.org/v1/race_control?session_key=latest');
                const messages = await response.json();
                const raceControlDiv = document.querySelector('#race-control');
                messages.sort((a, b) => new Date(b.date) - new Date(a.date));
                for (const message of messages) {
                    const messageId = `${message.session_key}-${message.date}`;
                    if (loadedRaceControlIds.has(messageId)) continue;
                    loadedRaceControlIds.add(messageId);
                    const messageDiv = document.createElement('div');
                    messageDiv.classList.add('race-message');
                    const messageDate = message.date ? new Date(message.date) : null;
                    const madridOffset = 2;
                    if (messageDate) {
                        messageDate.setHours(messageDate.getUTCHours() + madridOffset);
                    }
                    const timeElement = document.createElement('time');
                    timeElement.textContent = messageDate ? messageDate.toTimeString().split(' ')[0] : 'Hora desconocida';
                    messageDiv.appendChild(timeElement);
                    const messageElement = document.createElement('p');
                    messageElement.textContent = message.message || 'Sin mensaje';
                    messageDiv.appendChild(messageElement);
                    raceControlDiv.prepend(messageDiv);
                }
                const sortedMessages = Array.from(raceControlDiv.children).sort((a, b) => {
                    const timeA = a.querySelector('time').textContent;
                    const timeB = b.querySelector('time').textContent;
                    return new Date(`1970-01-01T${timeB}Z`) - new Date(`1970-01-01T${timeA}Z`);
                });
                raceControlDiv.innerHTML = '';
                sortedMessages.forEach(message => raceControlDiv.appendChild(message));
                while (raceControlDiv.children.length > 30) {
                    raceControlDiv.removeChild(raceControlDiv.lastChild);
                }
            } catch (error) {
                console.error('Error al cargar los mensajes de control de carrera:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            fetchTeamRadios();
            fetchRaceControlMessages();
            setInterval(() => {
                fetchTeamRadios();
                fetchRaceControlMessages();
            }, 5000);
        });
    </script>



<script>
    function configurarCookiesIframe() {
        var iframe = document.getElementById('movistarIframe');
        if (iframe) {
            iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-popups allow-forms');
        }
    }

    configurarCookiesIframe();
</script>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    particlesJS("particles-js", {
      "particles": {
        "number": {
          "value": 100,
          "density": {
            "enable": true,
            "value_area": 800
          }
        },
        "color": {
          "value": "#ffffff"
        },
        "shape": {
          "type": "circle",
          "stroke": {
            "width": 0,
            "color": "#000000"
          },
          "polygon": {
            "nb_sides": 5
          },
          "image": {
            "src": "img/github.svg",
            "width": 100,
            "height": 100
          }
        },
        "opacity": {
          "value": 0.5,
          "random": false,
          "anim": {
            "enable": false,
            "speed": 1,
            "opacity_min": 0.1,
            "sync": false
          }
        },
        "size": {
          "value": 3,
          "random": true,
          "anim": {
            "enable": false,
            "speed": 40,
            "size_min": 0.1,
            "sync": false
          }
        },
        "line_linked": {
          "enable": true,
          "distance": 150,
          "color": "#ffffff",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 6,
          "direction": "none",
          "random": false,
          "straight": false,
          "out_mode": "out",
          "bounce": false,
          "attract": {
            "enable": false,
            "rotateX": 600,
            "rotateY": 1200
          }
        }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": {
          "onhover": {
            "enable": true,
            "mode": "grab"
          },
          "onclick": {
            "enable": true,
            "mode": "push"
          },
          "resize": true
        },
        "modes": {
          "grab": {
            "distance": 140,
            "line_linked": {
              "opacity": 1
            }
          },
          "bubble": {
            "distance": 400,
            "size": 40,
            "duration": 2,
            "opacity": 8,
            "speed": 3
          },
          "repulse": {
            "distance": 200,
            "duration": 0.4
          },
          "push": {
            "particles_nb": 4
          },
          "remove": {
            "particles_nb": 2
          }
        }
      },
      "retina_detect": true
    });
  </script>
  
<script>
    const columns = [
        [document.getElementById('light1-1'), document.getElementById('light1-2'), document.getElementById('light1-3'), document.getElementById('light1-4')],
        [document.getElementById('light2-1'), document.getElementById('light2-2'), document.getElementById('light2-3'), document.getElementById('light2-4')],
        [document.getElementById('light3-1'), document.getElementById('light3-2'), document.getElementById('light3-3'), document.getElementById('light3-4')],
        [document.getElementById('light4-1'), document.getElementById('light4-2'), document.getElementById('light4-3'), document.getElementById('light4-4')],
        [document.getElementById('light5-1'), document.getElementById('light5-2'), document.getElementById('light5-3'), document.getElementById('light5-4')]
    ];
    const gameArea = document.getElementById('gameArea');
    const message = document.getElementById('message');
    const bestTimeDisplay = document.getElementById('bestTime');
    let startTime, endTime, bestTime = Infinity;
    let gameStarted = false;
    let lightTimeouts = [];

    document.addEventListener('DOMContentLoaded', () => {
        const storedBestTime = localStorage.getItem('bestTime');
        if (storedBestTime !== null) {
            bestTime = parseFloat(storedBestTime);
            bestTimeDisplay.textContent = `Mejor tiempo: ${bestTime} segundos`;
            bestTimeDisplay.style.display = 'block';
        }
    });

    gameArea.addEventListener('click', startGame);
    document.addEventListener('keydown', startGame);

    function startGame() {
        if (gameStarted) {
            message.textContent = 'Se paciente e int√©ntalo de nuevo';
            gameArea.style.borderColor = 'red';
            stopLights();
            return;
        }
        message.textContent = 'Espera a que las luces se apaguen...';
        gameArea.style.borderColor = '#fff';
        gameArea.removeEventListener('click', startGame);
        document.removeEventListener('keydown', startGame);
        let delay = Math.random() * 4000 + 1000; 

        columns.forEach((column, index) => {
            lightTimeouts.push(setTimeout(() => {
                column[2].classList.add('on');
                column[3].classList.add('on');
            }, index * 1000));
        });

        lightTimeouts.push(setTimeout(() => {
            columns.forEach(column => {
                column[2].classList.remove('on');
                column[3].classList.remove('on');
            });
            startTime = new Date().getTime();
            gameStarted = true;
            gameArea.addEventListener('click', recordReactionTime);
            document.addEventListener('keydown', recordReactionTime);
        }, delay + 4000)); 

        gameArea.addEventListener('click', tooEarly);
        document.addEventListener('keydown', tooEarly);
    }

    function tooEarly() {
        if (!gameStarted) {
            message.textContent = 'Se paciente e int√©ntalo de nuevo';
            gameArea.style.borderColor = 'red';
            stopLights();
            gameArea.addEventListener('click', restartGame);
            document.addEventListener('keydown', restartGame);
            gameArea.removeEventListener('click', tooEarly);
            document.removeEventListener('keydown', tooEarly);
        }
    }

    function recordReactionTime(event) {
        endTime = new Date().getTime();
        let reactionTime = (endTime - startTime) / 1000;
		reactionTime = parseFloat(reactionTime.toFixed(3));
        if (reactionTime < 0) {
            message.textContent = 'Se paciente e int√©ntalo de nuevo';
            gameArea.style.borderColor = 'red';
            stopLights();
            gameArea.addEventListener('click', restartGame);
            document.addEventListener('keydown', restartGame);
        } else {
            message.textContent = `El tiempo de reacci√≥n ha sido: ${reactionTime} segundos`;
            if (reactionTime < bestTime) {
                bestTime = reactionTime;
                bestTimeDisplay.textContent = `Mejor tiempo: ${bestTime} segundos`;
                bestTimeDisplay.style.display = 'block';
                gameArea.style.borderColor = 'green';
                localStorage.setItem('bestTime', bestTime);
            } else {
                gameArea.style.borderColor = 'red';
            }
            resetGame();
        }
    }

    function stopLights() {
        lightTimeouts.forEach(timeout => clearTimeout(timeout));
        lightTimeouts = [];
    }

    function resetGame() {
        gameStarted = false;
        stopLights();
        columns.forEach(column => {
            column[2].classList.remove('on');
            column[3].classList.remove('on');
        });
        gameArea.addEventListener('click', startGame);
        document.addEventListener('keydown', startGame);
        gameArea.removeEventListener('click', tooEarly);
        document.removeEventListener('keydown', tooEarly);
        gameArea.removeEventListener('click', recordReactionTime);
        document.removeEventListener('keydown', recordReactionTime);
        setTimeout(() => {
            gameArea.style.borderColor = '#fff';
        }, 500);
    }

    function restartGame() {
        columns.forEach(column => {
            column[2].classList.remove('on');
            column[3].classList.remove('on');
        });
        gameArea.removeEventListener('click', restartGame);
        document.removeEventListener('keydown', restartGame);
        startGame();
    }
	document.addEventListener('DOMContentLoaded', () => {
    const storedBestTime = localStorage.getItem('bestTime');
    if (storedBestTime !== null) {
        bestTime = parseFloat(storedBestTime);
        bestTimeDisplay.textContent = `Mejor tiempo: ${bestTime} segundos`;
        bestTimeDisplay.style.display = 'block';
    }


    const clearCacheButton = document.getElementById('clearCacheButton');
    clearCacheButton.addEventListener('click', clearCache);
});

function clearCache() {
    localStorage.removeItem('bestTime');

    bestTime = Infinity;

    bestTimeDisplay.textContent = '';
    bestTimeDisplay.style.display = 'none';

    message.textContent = 'Mejor tiempo borrado.';
    setTimeout(() => {
        message.textContent = '';
    }, 2000); 
}
</script>


</body>
</html>
